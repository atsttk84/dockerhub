# Contributor:
# Maintainer:
pkgname=mecab
pkgver=0.996
pkgrel=0
pkgdesc="mecab for alpine"
url="http://taku910.github.io/mecab/"
arch="x86_64"
license="GPL"
depends="openssl"
makedepends="curl git bash file sudo openssh autoconf automake alpine-sdk"
install=""
subpackages="$pkgname-dev $pkgname-doc"
mecab_url="https://drive.google.com/uc?export=download&id=0B4y35FiV1wh7cENtOXlicTFaRUE"
ipadic_url="https://drive.google.com/uc?export=download&id=0B4y35FiV1wh7MWVlSDBCSXZMTXM"
ipadicver=2.7.0-20070801
builddir="$srcdir/"

prepare() {
	cd "$builddir"
	curl -SL -o mecab-${pkgver}.tar.gz ${mecab_url}
	tar zxf mecab-${pkgver}.tar.gz
	curl -SL -o mecab-ipadic-${ipadicver}.tar.gz ${ipadic_url}
	tar zxf mecab-ipadic-${ipadicver}.tar.gz
}
build() {
	cd "$builddir"mecab-${pkgver}
	./configure --with-mecab-config="$pkgdir"bin/mecab-config --prefix="$pkgdir" --enable-utf8-only --with-charset=utf8 || return 1
	make || return 1
}

package() {
	cd "$builddir"/mecab-${pkgver}
	#sudo make DESTDIR="$pkgdir" install || return 1
	sudo make install || return 1
	PATH="${pkgdir}/mecab/bin:$PATH"
	cd "$builddir"mecab-ipadic-${ipadicver}
	./configure --with-charset=utf8 || return 1
	make || return 1
	cd "$builddir"/mecab-ipadic-${ipadicver}
	sudo make DESTDIR="$pkgdir" install || return 1
}

